---
title: golang中的包
date: 2016-06-02 16:25:27
tags: Go
---
golang的package和其他语言的组织方式完全不同，刚开始接触时，很不适应。

1. go的package不局限于一个文件，可以由多个文件组成。
	组成一个package的多个文件，编译后实际上和一个文件类似，组成包的不同文件相互之间可以直接引用变量和函数，不论是否导出
	因此，组成包的多个文件中不能有相同的全局变量和函数（这里有一个例外就是包的初始化函数：init函数，下面还有讨论）
2. go不要求package的名称和所在目录名相同，但是你最好保持相同，否则容易引起歧义。
	因为引入包的时候，go会使用子目录名作为包的路径，而你在代码中真正使用时，却要使用你package的名称。
3. 每个子目录中只能存在一个package，否则编译时会报错。
4. go的package是以绝对路径GOPATH来寻址的，不要用相对路径来import

每个package中应该是每个init都会被调用，且顺序固定

1. 对同一个go文件的init()调用顺序是从上到下的。
2. 对同一个package中不同文件是按文件名字符串比较“从小到大”顺序调用各文件中的init()函数。
3. 对不同的package，如果不相互依赖的话，按照main包中"先import的后调用"的顺序调用其包中的init()。
4. 如果package存在依赖，则先调用最早被依赖的package中的init()

如果是main package，目录下面包含多个go文件，命令行运行的时候有加上通配符，否则会报package找不到的错误:
```go
go run *.go //instead of go rum main.go
```